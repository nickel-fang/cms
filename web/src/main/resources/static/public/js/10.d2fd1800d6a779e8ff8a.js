webpackJsonp([10],{nar2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=E(a("IidI")),r=E(a("1cZb")),u=E(a("Dd8w")),i=E(a("Zx67")),d=E(a("Zrlr")),o=E(a("wxAW")),f=E(a("zwoO")),s=E(a("Pf15")),c=E(a("uuhB")),p=E(a("37+n"));a("1uA9"),a("YaoS"),a("TZP0"),a("8QNH");var m=a("GiK3"),h=E(m),g=a("Mn8c"),v=(a("y986"),a("F8kA")),y=E(a("mw3O"));function E(e){return e&&e.__esModule?e:{default:e}}var b=p.default.Item,w=c.default.TextArea,_={labelCol:{span:4},wrapperCol:{span:9}},x=(0,g.inject)("site")(l=(0,g.inject)("app")(l=(0,g.observer)(l=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));a.goBack=function(){a.props.history.goBack()},a.handleOnSave=function(){var e=a.props,t=e.history,l=e.location,n=e.app,i=e.site,d=i.onSave,o=i.getList,f=i.curItem,s=e.form,c=s.validateFieldsAndScroll,p=s.resetFields;c(function(e,a){if(!e){var i=(0,u.default)({},f,a);d(i,function(e,a){if(-1!==e){var u=function(){p(),t.goBack(),o(),n.saveSites()};l.search?r.default.success("保存成功",1,u):r.default.success("添加成功",1,u)}else r.default.error(a)})}})};var l=e.location.search,n=e.site,o=n.getListItem,s=n.updateStore,c=y.default.parse(l.substr(1));return c.id?o(c.id):s({curItem:{}}),a}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.location,a=t.search,l=t.pathname,n=e.site.getListItem;if(l!==this.props.location.pathname){var r=y.default.parse(a.substr(1));r.id?n(r.id):updateStore({curItem:{}})}}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site.curItem;return h.default.createElement("div",null,h.default.createElement(p.default,null,h.default.createElement(b,(0,u.default)({label:"站点名称"},_),t("name",{initialValue:a.name||"",rules:[{required:!0,message:"请输入站点名称",type:"string"},{validator:function(e,t,a){t.length>20?a("站点名称超出"+(t.length-20)+"个字符"):a()}}]})(h.default.createElement(c.default,{type:"text"}))),h.default.createElement(b,(0,u.default)({label:"站点域名"},_),t("domainPath",{initialValue:a.domainPath||"",rules:[{required:!0,message:"请输入站点域名"},{validator:function(e,t,a){t.length>40?a("站点域名超出"+(t.length-40)+"个字符"):a()}}]})(h.default.createElement(c.default,{type:"text"}))),h.default.createElement(b,(0,u.default)({label:"站点路径"},_),t("path",{initialValue:a.path||"",rules:[{required:!0,message:"请输入站点路径",type:"string"},{validator:function(e,t,a){t.length>40?a("站点路径超出"+(t.length-40)+"个字符"):a()}}]})(h.default.createElement(c.default,{type:"text"}))),h.default.createElement(b,(0,u.default)({label:"站点别名"},_),t("slug",{initialValue:a.slug||"",rules:[{required:!0,message:"请输入站点别名",type:"string"}]})(h.default.createElement(c.default,{type:"text"}))),h.default.createElement(b,(0,u.default)({label:"站点简称"},_),t("simpleName",{initialValue:a.simpleName||"",rules:[{type:"string"},{validator:function(e,t,a){t.length>20?a("站点简称超出"+(t.length-20)+"个字符"):a()}}]})(h.default.createElement(c.default,{type:"text"}))),h.default.createElement(b,(0,u.default)({label:"站点描述"},_),t("description",{initialValue:a.description||"",rules:[{type:"string"},{validator:function(e,t,a){t.length>120?a("站点描述超出"+(t.length-120)+"个字符"):a()}}]})(h.default.createElement(w,{rows:5}))),h.default.createElement(b,{wrapperCol:{span:6,offset:6}},h.default.createElement(n.default,{style:{marginRight:"20px"},type:"primary",onClick:this.handleOnSave},"保存"),h.default.createElement(n.default,{onClick:this.goBack},"返回"))))}}]),t}(m.Component))||l)||l)||l;t.default=(0,v.withRouter)(p.default.create()(x))},zDE4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=C(a("yF52")),r=C(a("0b0c")),u=C(a("IidI")),i=C(a("G3dI")),d=C(a("uuhB")),o=C(a("Dd8w")),f=C(a("LoBt")),s=C(a("1cZb")),c=C(a("Zx67")),p=C(a("Zrlr")),m=C(a("wxAW")),h=C(a("zwoO")),g=C(a("Pf15")),v=C(a("37+n"));a("tNTX"),a("kxBb"),a("1uA9"),a("/Hhv"),a("TZP0"),a("/eDY"),a("YaoS"),a("8QNH");var y=a("GiK3"),E=C(y),b=a("Mn8c"),w=a("y986"),_=a("F8kA"),x=C(a("mw3O"));function C(e){return e&&e.__esModule?e:{default:e}}var k=v.default.Item,S=(0,b.inject)("site")(l=(0,b.inject)("app")(l=(0,b.observer)(l=function(e){function t(e){(0,p.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.onCreate=function(){a.props.history.push("/site/edit")},a.onEdit=function(e){a.props.history.push({pathname:"/site/edit",search:"?"+x.default.stringify({id:e})})},a.onDelete=function(e){var t=a.props,l=t.site,n=l.getList,r=l.deleteListItem,u=t.app;r(e,function(e,t){0===e?(s.default.success("删除成功",.6),n(),u.deleteSites()):s.default.error(t)})},a.getColumns=function(){return[{title:"站点名称",dataIndex:"name",width:100},{title:"站点域名",dataIndex:"domainPath",width:100},{title:"站点路径",dataIndex:"path",width:100},{title:"站点描述",dataIndex:"description",width:100},{title:"操作",width:100,className:"action",render:function(e,t){var l=t.id;return[E.default.createElement("a",{key:"action-1",onClick:a.onEdit.bind(a,l),style:{marginRight:"5px"}},"编辑"),E.default.createElement(f.default,{key:"action-2",title:"确定删除吗",onConfirm:a.onDelete.bind(a,l)},E.default.createElement("a",null,"删除"))]}}]},a.onSearch=function(){var e=a.props,t=e.form.getFieldsValue,l=e.site,n=l.getList,r=l.updateStore,u=t();for(var i in u)u[i]||delete u[i];u.pageNumber=1,r({query:u}),n(u)},a.onPageChange=function(e){var t=a.props.site,l=(t.pagination,t.getList),n=t.query;l((0,o.default)({},n,{pageNumber:e.current,pageSize:e.pageSize}))},a}return(0,g.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.site,a=t.pagination,l=t.dataSource,f=t.loading,s=e.form.getFieldDecorator;return E.default.createElement("div",null,E.default.createElement(v.default,null,E.default.createElement(r.default,null,E.default.createElement(i.default,{span:8},E.default.createElement(k,(0,o.default)({label:"站点名称"},{labelCol:{span:6},wrapperCol:{span:16}}),s("name",{initialValue:""})(E.default.createElement(d.default,null)))),E.default.createElement(i.default,{span:6,style:{marginTop:"4px"}},E.default.createElement(u.default,{type:"primary",onClick:this.onSearch},"查询"))),E.default.createElement(r.default,null,E.default.createElement(i.default,null,E.default.createElement(u.default,{type:"primary",onClick:this.onCreate,style:{marginBottom:"20px"}},"添加站点")))),E.default.createElement(n.default,{bordered:!0,columns:this.getColumns(),rowKey:function(e){return e.id},dataSource:(0,w.toJS)(l),onChange:this.onPageChange,pagination:a,loading:f}))}}]),t}(y.Component))||l)||l)||l;t.default=(0,_.withRouter)(v.default.create()(S))},"zy+t":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=g(a("Zx67")),r=g(a("Zrlr")),u=g(a("wxAW")),i=g(a("zwoO")),d=g(a("Pf15")),o=a("GiK3"),f=g(o),s=a("Mn8c"),c=(a("y986"),a("F8kA")),p=g(a("zDE4")),m=g(a("nar2")),h=g(a("z4MD"));function g(e){return e&&e.__esModule?e:{default:e}}var v=(0,s.inject)("site")(l=(0,s.observer)(l=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return(0,e.site.getList)(),a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return f.default.createElement("div",{className:"p-common"},f.default.createElement(c.Switch,null,f.default.createElement(c.Route,{exact:!0,path:"/site",component:p.default}),f.default.createElement(c.Route,{exact:!0,path:"/site/edit",component:m.default}),f.default.createElement(c.Route,{component:h.default})))}}]),t}(o.Component))||l)||l;t.default=(0,c.withRouter)(v)}});