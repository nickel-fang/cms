webpackJsonp([5],{"/mHU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),l=a.n(n),o=a("bOdI"),r=a.n(o),i=a("+6Bu"),u=a.n(i),d=a("Zrlr"),c=a.n(d),s=a("wxAW"),f=a.n(s),p=a("zwoO"),h=a.n(p),m=a("Pf15"),y=a.n(m),v=a("GiK3"),k=a.n(v),w=a("KSGD"),g=a.n(w),b=a("HW6M");function E(){}var _=function(e){function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));C.call(a);var n=!1;return n="checked"in e?!!e.checked:!!e.defaultChecked,a.state={checked:n},a}return y()(t,e),f()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,a=e.disabled;t&&!a&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){"checked"in e&&this.setState({checked:!!e.checked})}},{key:"setChecked",value:function(e){this.props.disabled||("checked"in this.props||this.setState({checked:e}),this.props.onChange(e))}},{key:"focus",value:function(){this.node.focus()}},{key:"blur",value:function(){this.node.blur()}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.prefixCls,o=t.disabled,i=t.checkedChildren,d=t.tabIndex,c=t.unCheckedChildren,s=u()(t,["className","prefixCls","disabled","checkedChildren","tabIndex","unCheckedChildren"]),f=this.state.checked,p=o?-1:d||0,h=b((e={},r()(e,a,!!a),r()(e,n,!0),r()(e,n+"-checked",f),r()(e,n+"-disabled",o),e));return k.a.createElement("span",l()({},s,{className:h,tabIndex:p,ref:this.saveNode,onKeyDown:this.handleKeyDown,onClick:this.toggle,onMouseUp:this.handleMouseUp}),k.a.createElement("span",{className:n+"-inner"},f?i:c))}}]),t}(v.Component),C=function(){var e=this;this.toggle=function(){var t=e.props.onClick,a=!e.state.checked;e.setChecked(a),t(a)},this.handleKeyDown=function(t){37===t.keyCode?e.setChecked(!1):39===t.keyCode?e.setChecked(!0):32!==t.keyCode&&13!==t.keyCode||e.toggle()},this.handleMouseUp=function(t){e.node&&e.node.blur(),e.props.onMouseUp&&e.props.onMouseUp(t)},this.saveNode=function(t){e.node=t}};_.propTypes={className:g.a.string,prefixCls:g.a.string,disabled:g.a.bool,checkedChildren:g.a.any,unCheckedChildren:g.a.any,onChange:g.a.func,onMouseUp:g.a.func,onClick:g.a.func,tabIndex:g.a.number,checked:g.a.bool,defaultChecked:g.a.bool,autoFocus:g.a.bool},_.defaultProps={prefixCls:"rc-switch",checkedChildren:null,unCheckedChildren:null,className:"",defaultChecked:!1,onChange:E,onClick:E},t.default=_},"8wQP":function(e,t,a){var n=a("nw3t"),l=a("H59y")(function(e,t,a){n(e,a,t)});e.exports=l},A9Qa:function(e,t){e.exports=function(e,t,a,n){for(var l=-1,o=null==e?0:e.length;++l<o;){var r=e[l];t(n,r,a(r),e)}return n}},"DEW/":function(e,t){},DPXQ:function(e,t,a){"use strict";a("QhmJ"),a("DEW/")},DSNT:function(e,t,a){e.exports=a("/mHU")},ENKs:function(e,t){},GC0v:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l,o,r=x(a("IidI")),i=x(a("RjUz")),u=x(a("vgHw")),d=x(a("uuhB")),c=x(a("Dd8w")),s=x(a("kr0b")),f=x(a("Zx67")),p=x(a("Zrlr")),h=x(a("wxAW")),m=x(a("zwoO")),y=x(a("Pf15")),v=x(a("37+n"));a("1uA9"),a("DPXQ"),a("ZJow"),a("TZP0"),a("2xSi"),a("8QNH");var k=a("GiK3"),w=x(k),g=a("F8kA"),b=a("Mn8c"),E=x(a("mw3O")),_=a("y986"),C=x(a("fJ6B"));a("HRpK");var M=a("LkMq"),S=a("SFkB");function x(e){return e&&e.__esModule?e:{default:e}}var I=v.default.Item,N={labelCol:{span:4},wrapperCol:{span:12}},P=(0,b.inject)("app")(n=(0,b.inject)("sys")(n=(0,b.observer)((l=function(e){function t(e){(0,p.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));o.call(a);var n=e.location.search,l=e.sys,r=l.getMenuList,i=l.getMenuItem,u=l.updateStore,d=(l.getMenu,e.app.user),c=E.default.parse(n.substr(1));return u({menu:{parentId:c.parentId?c.parentId+"":""}}),r({systemId:d.isystem.id}),c.id&&i(c.id),a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e=this.props,t=e.sys,a=t.menu,n=t.menus,l=t.iconModalVisible,o=e.form.getFieldDecorator,f={visible:l,onCancel:this.hideIconModal,onSelect:this.selectIcon};return w.default.createElement("div",{className:"edit-form"},w.default.createElement(v.default,null,w.default.createElement(I,(0,c.default)({label:"上级菜单"},N),o("parentId",{initialValue:a.parentId?a.parentId+"":void 0})(w.default.createElement(s.default,{showSearch:!0,allowClear:!0,treeNodeFilterProp:"label",dropdownStyle:{maxHeight:300,overflow:"auto"},treeData:(0,_.toJS)(n)}))),w.default.createElement(I,(0,c.default)({label:"名称",hasFeedback:!0},N),o("name",{initialValue:a.name,rules:[{required:!0,message:"请输入名称"}]})(w.default.createElement(d.default,null))),w.default.createElement(I,(0,c.default)({label:"key"},N),o("code",{initialValue:a.code,rules:[{required:!0,message:"请填写key"}]})(w.default.createElement(d.default,null))),w.default.createElement(I,(0,c.default)({label:"链接"},N),o("href",{initialValue:a.href})(w.default.createElement(d.default,null))),w.default.createElement(I,(0,c.default)({label:"权限标识"},N),o("permission",{initialValue:a.permission})(w.default.createElement(d.default,null))),w.default.createElement(I,(0,c.default)({label:"图标"},N,{className:"icon-item"}),a.icon?[w.default.createElement(u.default,{type:a.icon,key:"icon"}),w.default.createElement("a",{className:"del-btn",key:"icon-delete",onClick:this.deleteIcon},"删除")]:void 0,w.default.createElement("a",{className:"sel-btn",onClick:this.showIconModal},"选择")),w.default.createElement(I,(0,c.default)({label:"可见"},N),o("show",{valuePropName:"checked",initialValue:void 0===a.show||a.show})(w.default.createElement(i.default,{checkedChildren:w.default.createElement(u.default,{type:"check"}),unCheckedChildren:w.default.createElement(u.default,{type:"cross"})}))),w.default.createElement(I,{wrapperCol:{span:N.wrapperCol.span,offset:N.labelCol.span}},w.default.createElement(r.default,{type:"primary",onClick:this.onSave,style:{marginRight:20}},"保存"),w.default.createElement(r.default,{onClick:this.goBack},"返回"))),w.default.createElement(C.default,f))}}]),t}(k.Component),o=function(){var e=this;this.showIconModal=function(){(0,e.props.sys.updateStore)({iconModalVisible:!0})},this.hideIconModal=function(){(0,e.props.sys.updateStore)({iconModalVisible:!1})},this.selectIcon=function(t){var a=e.props.sys,n=a.menu;(0,a.updateStore)({menu:(0,c.default)({},n,{icon:t}),iconModalVisible:!1})},this.deleteIcon=function(){var t=e.props.sys,a=t.menu;(0,t.updateStore)({menu:(0,c.default)({},a,{icon:void 0})})},this.goBack=function(){e.props.history.goBack()},this.onSave=function(){var t=e.props,a=t.history,n=t.app,l=n.user,o=n.queryMenus,r=t.sys,i=r.menu,u=r.saveMenu,d=r.getMenuList;(0,t.form.validateFields)(function(e,t){if(!e){var n=(0,c.default)({},i,t);console.log(n),u(n,function(){a.goBack(),S.sessionCache.delete(M.CACHE_MENUS),d({systemId:l.isystem.id}),o({systemId:l.isystem.id})})}})}},n=l))||n)||n)||n;t.default=(0,g.withRouter)(v.default.create()(P))},H59y:function(e,t,a){var n=a("szpM"),l=a("A9Qa"),o=a("JyYQ"),r=a("NGEn");e.exports=function(e,t){return function(a,i){var u=r(a)?n:l,d=t?t():{};return u(a,e,o(i,2),d)}}},HRpK:function(e,t){},RjUz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a("Dd8w")),l=h(a("bOdI")),o=h(a("Zrlr")),r=h(a("wxAW")),i=h(a("zwoO")),u=h(a("Pf15")),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a("GiK3")),c=h(a("KSGD")),s=h(a("DSNT")),f=h(a("HW6M")),p=h(a("JkBm"));function h(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){(0,o.default)(this,t);var e=(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.saveSwitch=function(t){e.rcSwitch=t},e}return(0,u.default)(t,e),(0,r.default)(t,[{key:"focus",value:function(){this.rcSwitch.focus()}},{key:"blur",value:function(){this.rcSwitch.blur()}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,o=t.size,r=t.loading,i=t.className,u=void 0===i?"":i,c=(0,f.default)(u,(e={},(0,l.default)(e,a+"-small","small"===o),(0,l.default)(e,a+"-loading",r),e));return d.createElement(s.default,(0,n.default)({},(0,p.default)(this.props,["loading"]),{className:c,ref:this.saveSwitch}))}}]),t}(d.Component);t.default=m,m.defaultProps={prefixCls:"ant-switch"},m.propTypes={prefixCls:c.default.string,size:c.default.oneOf(["small","default","large"]),className:c.default.string},e.exports=t.default},WCPn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=k(a("Zx67")),o=k(a("Zrlr")),r=k(a("wxAW")),i=k(a("zwoO")),u=k(a("Pf15")),d=a("GiK3"),c=k(d),s=a("Mn8c"),f=(a("y986"),a("F8kA")),p=a("LkMq"),h=k(a("xJY1")),m=k(a("XXKz")),y=k(a("GC0v")),v=k(a("z4MD"));function k(e){return e&&e.__esModule?e:{default:e}}var w=(0,s.observer)(n=function(e){function t(e){return(0,o.default)(this,t),(0,i.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"p-common"},c.default.createElement(f.Switch,null,c.default.createElement(f.Route,{exact:!0,path:p.ROUTER_PATHS.SYS_SETTING,component:h.default}),c.default.createElement(f.Route,{exact:!0,path:p.ROUTER_PATHS.USERS_MENU,component:m.default}),c.default.createElement(f.Route,{exact:!0,path:p.ROUTER_PATHS.USERS_MENU_EDIT,component:y.default}),c.default.createElement(f.Route,{exact:!0,path:p.ROUTER_PATHS.SYS_MENU,component:m.default}),c.default.createElement(f.Route,{exact:!0,path:p.ROUTER_PATHS.SYS_MENU_EDIT,component:y.default}),c.default.createElement(f.Route,{component:v.default})))}}]),t}(d.Component))||n;t.default=(0,f.withRouter)(w)},XXKz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l,o,r=I(a("LoBt")),i=I(a("vgHw")),u=I(a("yF52")),d=I(a("0b0c")),c=I(a("G3dI")),s=I(a("IidI")),f=I(a("Zx67")),p=I(a("Zrlr")),h=I(a("wxAW")),m=I(a("zwoO")),y=I(a("Pf15")),v=I(a("8wQP"));a("/eDY"),a("ZJow"),a("tNTX"),a("kxBb"),a("/Hhv"),a("1uA9");var k=a("GiK3"),w=I(k),g=I(a("O27J")),b=I(a("Lokx")),E=a("Mn8c"),_=a("y986"),C=I(a("mw3O")),M=a("F8kA"),S=a("LkMq"),x=a("SFkB");function I(e){return e&&e.__esModule?e:{default:e}}a("ENKs");var N=(0,v.default)(S.MENU_TYPES,"value"),P=(0,E.inject)("app")(n=(0,E.inject)("sys")(n=(0,E.observer)((l=function(e){function t(e){(0,p.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));o.call(a);var n=e.sys,l=e.app.user;return n.getMenuList({systemId:l.isystem.id}),a}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=g.default.findDOMNode(this.refs.table).querySelector(".ant-table-tbody"),a=void 0,n=void 0,l=void 0;this.sortable=new b.default(t,{draggable:".ant-table-row",onMove:function(e){var t=e.dragged,o=e.related;return t.children[0].getAttribute("data-pid")==o.children[0].getAttribute("data-pid")&&(a=t.children[0].getAttribute("data-pid"),n=t.children[0].getAttribute("data-id"),l=o.children[0].getAttribute("data-id"),!0)},onEnd:function(t){var o=t.oldIndex,r=t.newIndex,i=e.props,u=i.app,d=u.user,c=u.queryMenus,s=i.sys,f=s.menus,p=s.getMenuList,h=s.updateSorts,m=s.updateStore,y=(0,_.toJS)(f);if(o!==r){for(var v=x.Jt.tree.getNode(y,n),k=(x.Jt.tree.getNode(y,l),0==a?y:x.Jt.tree.getNode(y,a).children),w=void 0,g=void 0,b=0;b<k.length&&(k[b].id==n?w=b:k[b].id==l&&(g=b),!w||!g);b++);k.splice(w,1),k.splice(g,0,v),k=w<g?k.slice(w,g+1):k.slice(g,w+1);for(var E=[],C=[],M=0;M<k.length;M++)E.push(k[M].id),C.push(k[M].sort);C.sort(function(e,t){return t-e});for(var I=[],N=0;N<k.length;N++)k[N].sort=C[N],I.push({id:E[N],sort:C[N]});m({menus:y});h(I,function(){x.sessionCache.delete(S.CACHE_MENUS),c({systemId:d.isystem.id}),p({systemId:d.isystem.id})})}}})}},{key:"componentWillUnmount",value:function(){this.sortable.destroy()}},{key:"render",value:function(){var e=this.props.sys,t=e.menus,a=e.loading;return w.default.createElement("div",null,w.default.createElement(d.default,null,w.default.createElement(c.default,{span:24,style:{textAlign:"right",marginBottom:"20px"}},w.default.createElement(s.default,{type:"primary",onClick:this.addMenu.bind(this,"add")},"添加菜单"))),w.default.createElement(u.default,{simple:!0,bordered:!0,ref:"table",loading:a,columns:this.getColumns(),rowKey:function(e){return e.id},dataSource:(0,_.toJS)(t),pagination:!1}))}}]),t}(k.Component),o=function(){var e=this;this.getColumns=function(){return[{title:"名称",dataIndex:"name",key:"name",width:300,render:function(e,t){return{children:w.default.createElement("span",null,w.default.createElement(i.default,{type:t.icon,style:{marginRight:8}}),e),props:{"data-id":t.id,"data-pid":t.parentId}}}},{title:"链接",dataIndex:"href",key:"href",width:150},{title:"类型",key:"type",dataIndex:"type",width:100,render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NORMAL";arguments[1];return N[e]&&N[e].label}},{title:"KEY",dataIndex:"code",key:"code",width:100},{title:"操作",key:"action",width:150,className:"action-col",render:function(t,a){return[w.default.createElement("a",{key:"action-edit",onClick:function(){return e.editMenu(a)}},"编辑"),w.default.createElement(r.default,{title:"确定要删除吗？",key:"action-delete",onConfirm:function(){return e.onDeleteMenu(a)}},w.default.createElement("a",null,"删除")),w.default.createElement("a",{key:"action-add",onClick:function(){return e.addMenu(a)}},"添加下级菜单")]}}]},this.editMenu=function(t){e.props.history.push({pathname:S.ROUTER_PATHS.USERS_MENU_EDIT,search:"?"+C.default.stringify({id:t.id})})},this.addMenu=function(t){var a=e.props.history;"add"===t?a.push({pathname:S.ROUTER_PATHS.USERS_MENU_EDIT}):a.push({pathname:S.ROUTER_PATHS.USERS_MENU_EDIT,search:"?"+C.default.stringify({parentId:t.id})})},this.onDeleteMenu=function(t){var a=e.props,n=a.app.queryMenus,l=a.sys,o=l.getMenuList,r=l.deleteMenu,i=a.app.user;r(t.id,function(){x.sessionCache.delete(S.CACHE_MENUS),n({systemId:i.isystem.id}),o({systemId:i.isystem.id})})}},n=l))||n)||n)||n;t.default=(0,M.withRouter)(P)},fJ6B:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a("vaID")),l=h(a("Dd8w")),o=h(a("vgHw")),r=h(a("Zx67")),i=h(a("Zrlr")),u=h(a("wxAW")),d=h(a("zwoO")),c=h(a("Pf15")),s=h(a("qB1w"));a("nclB"),a("ZJow"),a("FV/t");var f=a("GiK3"),p=h(f);function h(e){return e&&e.__esModule?e:{default:e}}a("wglr");var m=s.default.TabPane,y=[{key:"1",label:"网站通用图标",items:["lock","unlock","area-chart","pie-chart","bar-chart","dot-chart","bars","book","calendar","cloud","cloud-download","code","code-o","copy","credit-card","delete","desktop","download","edit","ellipsis","file","file-text","file-unknown","file-pdf","file-excel","file-jpg","file-ppt","file-add","folder","folder-open","folder-add","hdd","frown","frown-o","meh","meh-o","smile","smile-o","inbox","laptop","appstore-o","appstore","line-chart","link","mail","mobile","notification","paper-clip","picture","poweroff","reload","search","setting","share-alt","shopping-cart","tablet","tag","tag-o","tags","tags-o","to-top","upload","user","video-camera","home","loading","loading-3-quarters","cloud-upload-o","cloud-download-o","cloud-upload","cloud-o","star-o","star","heart-o","heart","environment","environment-o","eye","eye-o","camera","camera-o","save","team","solution","phone","filter","exception","export","customer-service","qrcode","scan","like","like-o","dislike","dislike-o","message","pay-circle","pay-circle-o","calculator","pushpin","pushpin-o","bulb","select","switcher","rocket","bell","disconnect","database","compass","barcode","hourglass","key","flag","layout","printer","sound","usb","skin","tool","sync","wifi","car","schedule","user-add","user-delete","usergroup-add","usergroup-delete","man","woman","shop","gift","idcard","medicine-box","red-envelope","coffee","copyright","trademark","safety","wallet","bank","trophy","contacts","global","shake","api","fork"]},{key:"2",label:"方向性图标",items:["step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","up-circle-o","down-circle-o","right-circle-o","left-circle-o","double-right","double-left","verticle-left","verticle-right","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","play-circle-o","up-square","down-square","left-square","right-square","up-square-o","down-square-o","left-square-o","right-square-o","login","logout","menu-fold","menu-unfold"]},{key:"3",label:"提示建议性图标",items:["question","question-circle-o","question-circle","plus","plus-circle-o","plus-circle","pause","pause-circle-o","pause-circle","minus","minus-circle-o","minus-circle","plus-square","plus-square-o","minus-square","minus-square-o","info","info-circle-o","info-circle","exclamation","exclamation-circle-o","exclamation-circle","close","close-circle","close-circle-o","close-square","close-square-o","check","check-circle","check-circle-o","check-square","check-square-o","clock-circle-o","clock-circle"]},{key:"4",label:"品牌和标识",items:["android","android-o","apple","apple-o","windows","windows-o","ie","chrome","github","aliwangwang","aliwangwang-o","dingding","dingding-o"]}],v=function(e){function t(){return(0,i.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,r=e.onSelect,i=e.width,u={visible:t,onCancel:a,width:void 0===i?640:i,title:"选择图标",footer:!1,wrapClassName:"vertical-center-modal"};return p.default.createElement(n.default,(0,l.default)({},u,{className:"icon-modal"}),p.default.createElement(s.default,{defaultActiveKey:"1"},y.map(function(e){return p.default.createElement(m,{key:e.key,tab:e.label},p.default.createElement("ul",null,e.items.map(function(e){return p.default.createElement("li",{className:"icon-item",key:e,onClick:function(){return r(e)}},p.default.createElement(o.default,{type:e}))})))})))}}]),t}(f.Component);t.default=v},szpM:function(e,t){e.exports=function(e,t,a,n){for(var l=-1,o=null==e?0:e.length;++l<o;){var r=e[l];t(n,r,a(r),e)}return n}},wglr:function(e,t){},xJY1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a("Zx67")),l=c(a("Zrlr")),o=c(a("wxAW")),r=c(a("zwoO")),i=c(a("Pf15")),u=a("GiK3"),d=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return(0,l.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return d.default.createElement("div",null,"settinglist")}}]),t}(u.Component);t.default=s}});